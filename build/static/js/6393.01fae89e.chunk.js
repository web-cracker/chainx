(self.webpackChunkweb3_telegram_mini_app=self.webpackChunkweb3_telegram_mini_app||[]).push([[6393],{2986:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2986,e.exports=t},12685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>de});var s=n(9950),o=n(46650),i=n(82838);const r=(0,i.UU)("https://okmdjcuvqebjxcumpbih.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWRqY3V2cWVianhjdW1wYmloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3MjU0MTQsImV4cCI6MjA3MDMwMTQxNH0.4Qr019gQrhteIV09ma3niS38NZstI63jyzIqI97WNeM");var l=n(4666),a=n(72368),d=n(42074),c=n(28429),p=n(51622),x=n(85826),h=n(93660),u=n(20744),g=(n(47028),n(90382)),m=n(3043),f=n(78699),b=n(44414);const w="0x18701b29a83677be300e869a8b65fa58fa7518d9a99813001ec93967db94d04f";const j=function(){const[e,t]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[i,r]=(0,s.useState)(""),[l,a]=(0,s.useState)(!1);return(0,b.jsxs)("div",{className:"bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center font-sans p-4",children:[(0,b.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-md",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-red-500",children:"AVAX Transfer (Insecure)"}),(0,b.jsxs)("p",{className:"text-center text-yellow-400 mb-6 border border-yellow-500 p-3 rounded-md",children:[(0,b.jsx)("strong",{children:"Security Warning:"})," This app uses a hardcoded private key. Do not use in production."]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{htmlFor:"toAddress",className:"block mb-2 text-sm font-medium",children:"Recipient Address"}),(0,b.jsx)("input",{type:"text",id:"toAddress",value:e,onChange:e=>t(e.target.value),className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0x..."})]}),(0,b.jsx)("button",{onClick:async()=>{if(e){0,a(!0),r(""),o("");try{const t=new g.FR("https://api.avax-test.network/ext/bc/C/rpc"),n=new m.u(w,t),s=await n.sendTransaction({to:e,value:f.g5("0.01")});o(s.hash),await s.wait()}catch(t){r(`Transaction failed: ${t.message}`)}finally{a(!1)}}else r("Please enter a recipient address.")},disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition duration-300 disabled:bg-gray-500 disabled:cursor-not-allowed",children:l?"Sending...":"Send 0.01 AVAX"}),n&&(0,b.jsxs)("div",{className:"mt-6 p-4 bg-green-900/50 border border-green-700 rounded-md",children:[(0,b.jsx)("p",{className:"text-green-300 font-bold",children:"Success! Transaction Sent."}),(0,b.jsxs)("p",{className:"text-sm break-all mt-1",children:[(0,b.jsx)("strong",{children:"TxID:"})," ",(0,b.jsx)("a",{href:`https://testnet.snowtrace.io/tx/${n}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:n})]})]}),i&&(0,b.jsx)("div",{className:"mt-6 p-4 bg-red-900/50 border border-red-700 rounded-md",children:(0,b.jsxs)("p",{className:"text-red-300",children:[(0,b.jsx)("strong",{children:"Error:"})," ",i]})})]}),(0,b.jsx)("footer",{className:"text-center mt-8 text-gray-500 text-sm",children:(0,b.jsx)("p",{children:"This application is for demonstration purposes only."})})]})};var y=n(44243);const v=()=>{const[e,t]=(0,s.useState)([]),[n,o]=(0,s.useState)(!0),[i,l]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async()=>{try{const{data:e,error:n}=await r.from("users").select("email, wallet_address, coins").order("coins",{ascending:!1});if(n)throw n;t(e)}catch(e){console.error("Error fetching leaderboard:",e.message),l("Failed to load leaderboard. Please try again later.")}finally{o(!1)}})()}),[]),n?(0,b.jsx)("div",{style:{color:"white",textAlign:"center",padding:"20px"},children:"Loading Leaderboard..."}):i?(0,b.jsx)("div",{style:{color:"red",textAlign:"center",padding:"20px"},children:i}):(0,b.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"auto"},children:[(0,b.jsx)(x.hE,{level:"1",style:{color:"white",textAlign:"center",marginBottom:"20px"},children:"Leaderboard"}),0===e.length?(0,b.jsx)("div",{style:{color:"white",textAlign:"center"},children:"No users on the leaderboard yet."}):(0,b.jsx)(x.B8,{children:e.map(((e,t)=>(0,b.jsx)(x.fh,{before:(0,b.jsxs)("span",{style:{color:"white",fontWeight:"bold",minWidth:"30px"},children:["#",t+1]}),subtitle:(0,b.jsxs)("div",{style:{color:"#a0a0a0",fontSize:"12px"},children:[e.email&&(0,b.jsxs)("div",{children:["Email: ",e.email]}),e.wallet_address&&(0,b.jsxs)("div",{children:["Wallet: ",e.wallet_address.substring(0,6),"...",e.wallet_address.substring(e.wallet_address.length-4)]})]}),after:(0,b.jsxs)("span",{style:{color:"#FFD700",fontWeight:"bold"},children:[e.coins," Coins"]}),style:{backgroundColor:"#333",marginBottom:"10px",borderRadius:"8px"},children:(0,b.jsx)("span",{style:{color:"white",fontWeight:"bold"},children:e.email||(e.wallet_address?`User ${e.wallet_address.substring(0,6)}`:`User ${t+1}`)})},e.email||e.wallet_address||t)))})]})},S=e=>{let{user:t,onClose:n}=e;const i=(0,c.Zp)(),{open:l}=(0,p.o1)(),{isConnected:a}=(0,o.F)(),[d,h]=(0,s.useState)(""),[u,g]=(0,s.useState)(!1),[m,f]=(0,s.useState)(""),[w,v]=(0,s.useState)(0),[S,k]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=parseInt(localStorage.getItem("userPoints"))||t.coins||0;v(e)}),[t.coins]);return(0,b.jsx)("div",{className:"overlay",children:(0,b.jsx)("div",{className:"modal",children:S?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"header",children:[(0,b.jsxs)(x.$n,{onClick:()=>k(!1),className:"back-button",children:[(0,b.jsx)(y.QVr,{style:{marginRight:"8px"}})," Back to Profile"]}),(0,b.jsx)(x.hE,{level:"2",className:"title",children:"Redeem AVAX"})]}),(0,b.jsx)(j,{})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"header",children:(0,b.jsx)(x.hE,{level:"2",className:"title",children:"Profile"})}),(0,b.jsxs)(x.NM,{className:"points",children:["Total Points: ",w]}),(0,b.jsxs)("div",{className:"button-group",children:[(0,b.jsxs)(x.$n,{onClick:()=>i("/redeem"),className:"button primary",children:[(0,b.jsx)(y.Wp,{style:{marginRight:"8px"}})," Redeem NFTs"]}),(0,b.jsxs)(x.$n,{onClick:()=>i("/my-nfts"),className:"button secondary",children:[(0,b.jsx)(y.lcY,{style:{marginRight:"8px"}})," My NFTs"]}),(0,b.jsxs)(x.$n,{onClick:()=>i("/leaderboard"),className:"button secondary",children:[(0,b.jsx)(y.lcY,{style:{marginRight:"8px"}})," Leaderboard"]}),(0,b.jsxs)(x.$n,{onClick:()=>k(!0),className:"button tertiary",children:[(0,b.jsx)(y.cEG,{style:{marginRight:"8px"}})," Redeem AVAX"]}),a&&(0,b.jsxs)(x.$n,{onClick:()=>l({view:"Account"}),className:"button primary",children:[(0,b.jsx)(y.NBi,{style:{marginRight:"8px"}})," Open Web3 Profile"]}),(0,b.jsxs)(x.$n,{onClick:async()=>{await r.auth.signOut(),n()},className:"logout-button destructive",children:[(0,b.jsx)(y.axc,{style:{marginRight:"8px"}})," Logout"]})]}),(0,b.jsxs)(x.$n,{onClick:n,className:"close-button secondary",children:[(0,b.jsx)(y.QCr,{style:{marginRight:"8px"}})," Close"]})]})})})},k={backgroundColor:"#007AFF",color:"white",borderRadius:"12px",padding:"15px 30px",fontSize:"18px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 122, 255, 0.4)",transition:"all 0.3s ease"},C=e=>{let{session:t}=e;const{isConnected:n,address:i}=(0,o.F)(),{open:l}=(0,p.o1)(),a=(0,c.Zp)(),[d,g]=(0,s.useState)(window.innerWidth<600),[m,f]=(0,s.useState)(!1),w=(0,h.zI)(),j=!!w,[y,v]=(0,s.useState)(null);null===u.XaK||void 0===u.XaK||u.XaK.user;(0,s.useEffect)((()=>{(async()=>{let e=n?i:j?w:null;if(!e)return;const{data:t,error:s}=await r.from("users").select("*").eq("wallet_address",e).single();if(s&&"PGRST116"!==s.code)console.error("Error fetching user:",s.message);else if(t)v(t);else{const{data:t,error:n}=await r.from("users").insert([{wallet_address:e,coins:0}]).select().single();if(n)return void console.error("Error inserting user:",n.message);v(t)}})()}),[n,i,j,w]),(0,s.useEffect)((()=>{const e=()=>{g(window.innerWidth<600)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);return(0,s.useEffect)((()=>{const e=n?i:j?w:null;e?(localStorage.setItem("wallet_address",e),console.log("Saved wallet address to localStorage:",e)):localStorage.removeItem("wallet_address")}),[n,i,j,w]),(0,b.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"black",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"20px"},children:[(0,b.jsx)("div",{onClick:()=>f(!0),style:{position:"absolute",top:"20px",right:"20px",cursor:"pointer",zIndex:10},children:(0,b.jsxs)("svg",{width:50,height:50,viewBox:"0 0 100 100",children:[(0,b.jsx)("path",{d:"M50 0L95.1141 25V75L50 100L4.88591 75V25L50 0Z",fill:"#4A90E2"}),(0,b.jsx)("path",{d:"M50 15L82.4764 32.5V67.5L50 85L17.5236 67.5V32.5L50 15Z",fill:"white"}),(0,b.jsx)("path",{d:"M50 28L72.3205 40V60L50 72L27.6795 60V40L50 28Z",fill:"#4A90E2"})]})}),(0,b.jsx)("div",{style:{marginBottom:"40px"},children:(0,b.jsxs)("svg",{width:150,height:150,viewBox:"0 0 100 100",children:[(0,b.jsx)("path",{d:"M50 0L95.1141 25V75L50 100L4.88591 75V25L50 0Z",fill:"#4A90E2"}),(0,b.jsx)("path",{d:"M50 15L82.4764 32.5V67.5L50 85L17.5236 67.5V32.5L50 15Z",fill:"white"}),(0,b.jsx)("path",{d:"M50 28L72.3205 40V60L50 72L27.6795 60V40L50 28Z",fill:"#4A90E2"})]})}),(0,b.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,b.jsxs)(x.hE,{level:"1",style:{color:"white",fontFamily:"'Poppins', sans-serif",fontSize:window.innerWidth<600?"24px":"32px",textAlign:"center",marginBottom:"8px"},children:["Welcome to, ",(0,b.jsx)("b",{style:{color:"red"},children:"AVA"})," Quiz!"]}),t&&t.user&&t.user.email&&(0,b.jsxs)("p",{style:{color:"white",fontFamily:"'Poppins', sans-serif",fontSize:window.innerWidth<600?"12px":"16px",textAlign:"center",lineHeight:"1.5",margin:"0 10px 10px 10px"},children:["Logged in as: ",t.user.email]}),(0,b.jsxs)("p",{style:{color:"white",fontFamily:"'Poppins', sans-serif",fontSize:window.innerWidth<600?"14px":"18px",textAlign:"center",lineHeight:"1.5",margin:"0 10px"},children:["Solve blockchain quizzes, test your skills, and win ",(0,b.jsx)("b",{style:{color:"white"},children:"AVAX"})," rewards!"]})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:"20px"},children:[n||j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.$n,{onClick:()=>{a("/game-options")},style:{backgroundColor:"#007AFF",color:"white",borderRadius:"12px",padding:"15px 30px",fontSize:"18px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 122, 255, 0.4)",transition:"all 0.3s ease"},children:"Launch Game"}),n&&(0,b.jsx)(x.$n,{onClick:()=>{console.log("Opening Web3 Profile..."),l({view:"Account"})},style:{backgroundColor:"black",color:"white",borderRadius:"12px",padding:"15px 30px",fontSize:"18px",fontWeight:"bold",border:"2px solid #007AFF",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 122, 255, 0.4)",transition:"all 0.3s ease"},children:"Open Web3 Profile"}),j&&(0,b.jsx)(h.MJ,{})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(x.$n,{onClick:()=>{l()},style:k,children:"Connect Web3 Wallet"})}),(0,b.jsx)(x.$n,{onClick:()=>a("/p2p"),style:{backgroundColor:"#00C853",color:"white"},children:"Send AVAX"})]}),m&&y&&(0,b.jsx)(S,{user:y,onClose:()=>f(!1)})]})};var N=n(59680),A=n(45833),F=n(81850);const I=new(n(70247).ij)("AIzaSyDbxrkNvJ_RxQ9gGquOxu4VRpk-VyO8S2U"),z={container:{background:"linear-gradient(135deg, #1a1a1a, #000000)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"20px",minHeight:"100vh",color:"white"},title:{color:"white",marginBottom:"30px",fontSize:"32px",fontWeight:"bold"},card:{background:"#1c1c1e",padding:"30px",borderRadius:"20px",width:"100%",maxWidth:"600px",border:"1px solid #333",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},question:{color:"white",marginBottom:"30px",fontSize:"24px",minHeight:"60px"},optionsGrid:{display:"grid",gridTemplateColumns:"1fr",gap:"15px"},button:{backgroundColor:"#007AFF",color:"white",borderRadius:"12px",padding:"18px",fontSize:"18px",fontWeight:"600",border:"none",cursor:"pointer",transition:"all 0.2s ease-in-out",display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"},correctAnswer:{backgroundColor:"#28a745",boxShadow:"0 0 15px rgba(40, 167, 69, 0.7)"},incorrectAnswer:{backgroundColor:"#dc3545",boxShadow:"0 0 15px rgba(220, 53, 69, 0.7)"},disabledButton:{backgroundColor:"#333",color:"#888",cursor:"not-allowed"},icon:{width:"24px",height:"24px"},explanationContainer:{marginTop:"20px",padding:"15px",borderRadius:"12px",backgroundColor:"#2a2a2e"},nextButton:{marginTop:"15px",backgroundColor:"#FF9500",color:"white",fontWeight:"bold"},loader:{width:"48px",height:"48px",color:"white",animation:"spin 1s linear infinite"}},E=()=>{const[e,t]=(0,s.useState)([]),[n,o]=(0,s.useState)(0),[i,r]=(0,s.useState)(0),[l,a]=(0,s.useState)(null),[d,p]=(0,s.useState)(null),[h,u]=(0,s.useState)(!1),[g,m]=(0,s.useState)(!0),[f,w]=(0,s.useState)(null),j=(0,c.Zp)();(0,s.useEffect)((()=>{(async()=>{try{const e=I.getGenerativeModel({model:"gemini-1.5-flash"}),n='\n        Generate 5 multiple-choice quiz questions about blockchain and Web3.\n        Each question should be in JSON format:\n        [\n          {\n            "question": "string",\n            "options": ["string", "string", "string", "string"],\n            "correctAnswer": "string",\n            "explanation": "string"\n          }\n        ]\n        ',s=await e.generateContent(n),o=await s.response,i=(await o.text()).replace(/```json/g,"").replace(/```/g,"").trim(),r=JSON.parse(i);t(r)}catch(e){w(e.message)}finally{m(!1)}})(),sessionStorage.removeItem("quizPointsAdded")}),[]);if(g)return(0,b.jsxs)("div",{style:z.container,children:[(0,b.jsx)(N.A,{style:z.loader}),(0,b.jsx)(x.hE,{level:"1",style:z.title,children:"Loading Quiz..."})]});if(f)return(0,b.jsxs)("div",{style:z.container,children:[(0,b.jsx)(x.hE,{level:"1",style:z.title,children:"Error"}),(0,b.jsx)(x.NM,{style:{color:"#dc3545"},children:f})]});if(0===e.length)return(0,b.jsx)("div",{style:z.container,children:(0,b.jsx)(x.hE,{level:"1",style:z.title,children:"No quiz questions available."})});const y=(n+1)/e.length*100,v=e[n];return(0,b.jsxs)("div",{style:z.container,children:[(0,b.jsx)(x.hE,{level:"1",style:z.title,children:"AVA Quiz"}),(0,b.jsxs)(x.Zp,{style:z.card,children:[(0,b.jsx)(x.ke,{value:y,style:{marginBottom:"30px"}}),(0,b.jsx)(x.NM,{level:"1",style:z.question,children:v.question}),(0,b.jsx)("div",{style:z.optionsGrid,children:v.options.map((t=>{const s=l===t,o=v.correctAnswer===t;let c={...z.button};return h&&(c=o?{...c,...z.correctAnswer}:s&&!d?{...c,...z.incorrectAnswer}:{...c,...z.disabledButton}),(0,b.jsxs)(x.$n,{onClick:()=>(t=>{if(h)return;const s=t===e[n].correctAnswer;let o=i;a(t),p(s),s&&(o=i+1,r(o)),u(!0)})(t),style:c,disabled:h,children:[t,h&&o&&(0,b.jsx)(A.A,{style:z.icon}),h&&s&&!d&&(0,b.jsx)(F.A,{style:z.icon})]},t)}))}),h&&(0,b.jsxs)("div",{style:z.explanationContainer,children:[(0,b.jsx)(x.NM,{style:{color:d?"#28a745":"#dc3545",fontWeight:"bold"},children:d?"Correct!":"Incorrect"}),(0,b.jsx)("p",{style:{color:"white"},children:v.explanation}),(0,b.jsx)(x.$n,{onClick:()=>{u(!1),a(null),p(null),n+1<e.length?o((e=>e+1)):j("/dashboard",{state:{score:i,quizCompleted:!0}})},style:z.nextButton,children:n+1<e.length?"Next Question":"Finish Quiz"})]})]})]})},W=e=>{let{score:t}=e;return(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},children:[(0,b.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"#FFD700"}),(0,b.jsx)("text",{x:"50",y:"60",textAnchor:"middle",fontSize:"40",fontWeight:"bold",fill:"#B8860B",children:"P"})]}),(0,b.jsx)(x.EY,{style:{color:"white",fontSize:"24px",fontWeight:"bold"},children:t})]})},T=(0,i.UU)("https://okmdjcuvqebjxcumpbih.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rbWRqY3V2cWVianhjdW1wYmloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3MjU0MTQsImV4cCI6MjA3MDMwMTQxNH0.4Qr019gQrhteIV09ma3niS38NZstI63jyzIqI97WNeM"),R=e=>{var t,n;let{session:o}=e;const i=(0,c.zy)(),r=(0,c.Zp)(),l=null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.email,a=localStorage.getItem("wallet_address"),{score:d=0,wallet_address:p}=i.state||{},h=p||a||"",[u,g]=(0,s.useState)(0),[m,f]=(0,s.useState)(window.innerWidth<600);(0,s.useEffect)((()=>{console.log("Dashboard mounted."),console.log("Location state:",i.state),console.log("Wallet address:",h),console.log("User Email:",l);(async()=>{var e;if(!l)return void console.warn("No user email found, skipping DB update.");console.log("Fetching coins for email:",l);const{data:t,error:n}=await T.from("users").select("coins").eq("email",l).single();if(n&&"PGRST116"!==n.code)return void console.error("Error fetching user:",n);const s=(null===t||void 0===t?void 0:t.coins)||0;if(console.log("Coins before update:",s),null!==(e=i.state)&&void 0!==e&&e.quizCompleted){const e=10*d,t=s+e;console.log(`Quiz completed. Adding ${e} coins.`);const{error:n}=await T.from("users").upsert([{email:l,coins:t}],{onConflict:"email"});if(n)return void console.error("Error updating coins:",n)}else console.log("Quiz not marked as completed, skipping update.");const{data:o,error:r}=await T.from("users").select("coins").eq("email",l).single();r?console.error("Error fetching updated coins:",r):(console.log("Coins after update:",o.coins),g(o.coins||0))})()}),[l,i.state,d]),(0,s.useEffect)((()=>{const e=()=>f(window.innerWidth<600);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const w=d/5*100,j=2*Math.PI*45,y=j-w/100*j;return(0,b.jsxs)("div",{style:{background:"black",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:m?"20px":"40px",minHeight:"100vh",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"},children:[(0,b.jsx)(x.hE,{level:"1",style:{color:"white",marginBottom:m?"20px":"40px",fontSize:m?"28px":"36px"},children:"Quiz Results"}),(0,b.jsxs)("div",{style:{position:"relative",marginBottom:"40px"},children:[(0,b.jsxs)("svg",{width:"200",height:"200",viewBox:"0 0 100 100",children:[(0,b.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#333",strokeWidth:"10"}),(0,b.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#007AFF",strokeWidth:"10",strokeDasharray:j,strokeDashoffset:y,transform:"rotate(-90 50 50)"})]}),(0,b.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"24px",fontWeight:"bold"},children:[d," / 5"]})]}),(0,b.jsx)("h1",{style:{color:"#FF9500",fontSize:m?"18px":"20px",fontWeight:"bold"},children:"Total Coins:"}),(0,b.jsx)(W,{score:u}),(null===(n=i.state)||void 0===n?void 0:n.quizCompleted)&&(0,b.jsxs)("p",{style:{color:"white",fontSize:m?"16px":"18px",marginTop:"5px"},children:["Current Quiz Score: ",10*d," coins"]}),(0,b.jsxs)(x.NM,{level:"1",style:{color:"white",marginBottom:m?"20px":"40px",fontSize:m?"18px":"24px"},children:["You earned ",10*d," coins!"]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:m?"column":"row",gap:"20px"},children:[(0,b.jsx)(x.$n,{onClick:()=>r("/"),style:{backgroundColor:"#007AFF",color:"white",borderRadius:"15px",padding:m?"15px 30px":"20px 40px",fontSize:m?"18px":"20px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 5px 20px rgba(0, 122, 255, 0.5)",transition:"all 0.3s ease"},children:"Play Again"}),(0,b.jsx)(x.$n,{onClick:()=>r("/redeem"),style:{backgroundColor:"#FF9500",color:"white",borderRadius:"15px",padding:m?"15px 30px":"20px 40px",fontSize:m?"18px":"20px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 5px 20px rgba(255, 149, 0, 0.5)",transition:"all 0.3s ease"},children:"Redeem NFTs"}),(0,b.jsx)(x.$n,{onClick:()=>r("/my-nfts"),style:{backgroundColor:"#00C853",color:"white",borderRadius:"15px",padding:m?"15px 30px":"20px 40px",fontSize:m?"18px":"20px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 5px 20px rgba(0, 200, 83, 0.5)",transition:"all 0.3s ease"},children:"My NFTs"})]})]})},B=n.p+"static/media/bronze.c9da46c2d78c90807f55.png",L=n.p+"static/media/silver.d5887e5e984fab3c1f3b.png",q=n.p+"static/media/gold.837382c0d1075c17e5dc.png",M=n.p+"static/media/platinum.9b7767345d8644591f6e.png",$=[{id:1,name:"Bronze Trophy",cost:100,image:B},{id:2,name:"Silver Trophy",cost:200,image:L},{id:3,name:"Gold Trophy",cost:300,image:q},{id:4,name:"Platinum Trophy",cost:400,image:M}],V=()=>{const e=(0,c.Zp)(),[t,n]=(0,s.useState)(0),[o,i]=(0,s.useState)([]),[r,l]=(0,s.useState)(window.innerWidth<600);return(0,s.useEffect)((()=>{const e=parseInt(localStorage.getItem("userPoints"))||0;n(e);const t=JSON.parse(localStorage.getItem("ownedNfts"))||[],s=new Set(t.map((e=>e.id))),o=$.filter((e=>!s.has(e.id)));i(o)}),[]),(0,s.useEffect)((()=>{const e=()=>{l(window.innerWidth<600)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,b.jsxs)("div",{style:{background:"black",padding:r?"20px":"40px",minHeight:"100vh",position:"relative"},children:[(0,b.jsx)(x.$n,{onClick:()=>e("/"),style:{position:"absolute",top:r?"10px":"20px",left:r?"10px":"20px",backgroundColor:"transparent",color:"white",border:"none",fontSize:r?"24px":"30px",cursor:"pointer",padding:"0"},children:"\u2190 "}),(0,b.jsx)(x.hE,{level:"1",style:{color:"white",textAlign:"center",marginBottom:r?"20px":"40px",fontSize:r?"28px":"36px"},children:"Redeem NFTs"}),(0,b.jsxs)(x.EY,{style:{color:"white",textAlign:"center",marginBottom:r?"10px":"20px",fontSize:r?"16px":"20px"},children:["Your Points: ",t]}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:r?"1fr":"repeat(auto-fill, minmax(250px, 1fr))",gap:r?"15px":"20px"},children:o.length>0?o.map((n=>{const s=t>=n.cost;return(0,b.jsxs)(x.Zp,{style:{background:"#1c1c1e",padding:"20px",borderRadius:"20px",textAlign:"center"},children:[(0,b.jsx)("img",{src:n.image,alt:n.name,style:{width:"100%",borderRadius:"15px",marginBottom:"20px"}}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"10px"},children:[(0,b.jsx)(x.EY,{style:{color:"white",fontSize:r?"18px":"20px",fontWeight:"bold"},children:n.name}),(0,b.jsxs)(x.EY,{style:{color:"#FFD700",fontSize:r?"16px":"18px"},children:[n.cost," Points"]})]}),(0,b.jsx)(x.$n,{onClick:()=>e(`/redeem/${n.id}`),disabled:!s,style:{backgroundColor:s?"#007AFF":"#555",color:"white",borderRadius:"12px",padding:r?"10px 20px":"15px 30px",fontSize:r?"16px":"18px",fontWeight:"bold",border:"none",cursor:s?"pointer":"not-allowed",boxShadow:s?"0 4px 15px rgba(0, 122, 255, 0.4)":"none",transition:"all 0.3s ease"},children:s?"Redeem":"Insufficient Points"})]},n.id)})):(0,b.jsx)(x.EY,{style:{color:"white",textAlign:"center",gridColumn:"1 / -1"},children:"All NFTs redeemed!"})})]})},O=[{id:1,name:"Bronze Trophy",cost:100,image:B,description:"A symbol of your first steps into the Web3 world."},{id:2,name:"Silver Trophy",cost:200,image:L,description:"Awarded for your growing expertise in decentralized technologies."},{id:3,name:"Gold Trophy",cost:300,image:q,description:"A testament to your mastery of the blockchain."},{id:4,name:"Platinum Trophy",cost:400,image:M,description:"The ultimate recognition for a true Web3 pioneer."}],P=()=>{const{id:e}=(0,c.g)(),t=(0,c.Zp)(),n=O.find((t=>t.id===parseInt(e))),[o,i]=(0,s.useState)(0),[r,l]=(0,s.useState)(!1),[a,d]=(0,s.useState)(window.innerWidth<600);(0,s.useEffect)((()=>{const e=parseInt(localStorage.getItem("userPoints"))||0;if(i(e),n){const t=JSON.parse(localStorage.getItem("ownedNfts"))||[];l(e>=n.cost&&!t.includes(n.id))}}),[n]),(0,s.useEffect)((()=>{const e=()=>{d(window.innerWidth<600)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);return n?(0,b.jsx)("div",{style:{background:"black",padding:a?"20px":"40px",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:(0,b.jsxs)(x.Zp,{style:{background:"#1c1c1e",padding:a?"20px":"40px",borderRadius:"20px",textAlign:"center",maxWidth:a?"90%":"600px",border:"1px solid #333"},children:[(0,b.jsx)(x.hE,{level:"1",style:{color:"white",marginBottom:a?"15px":"25px",fontSize:a?"26px":"36px"},children:"Redeem NFT"}),(0,b.jsx)("img",{src:n.image,alt:n.name,style:{width:a?"50%":"70%",maxWidth:a?"120px":"200px",borderRadius:"15px",marginBottom:a?"25px":"35px",boxShadow:"0 0 20px rgba(0, 122, 255, 0.5)"}}),(0,b.jsx)(x.NM,{level:"2",style:{color:"white",marginBottom:a?"8px":"15px",fontSize:a?"20px":"28px"},children:n.name}),(0,b.jsx)(x.EY,{style:{color:"#a0a0a0",marginBottom:a?"15px":"25px",fontSize:a?"13px":"16px",lineHeight:"1.4",display:"block"},children:n.description}),(0,b.jsxs)(x.EY,{style:{color:"#FFD700",fontSize:a?"22px":"30px",fontWeight:"bold",marginBottom:a?"15px":"25px",display:"block"},children:["Cost: ",n.cost," Points"]}),(0,b.jsxs)(x.EY,{style:{color:"white",fontSize:a?"15px":"18px",display:"block"},children:["Your current points: ",o]}),(0,b.jsx)(x.$n,{onClick:()=>{if(r){const e=o-n.cost;localStorage.setItem("userPoints",e),i(e);const s=[...JSON.parse(localStorage.getItem("ownedNfts"))||[],n.id];localStorage.setItem("ownedNfts",JSON.stringify(s)),alert(`NFT ${n.name} redeemed successfully!`),t("/my-nfts")}else alert("Insufficient points to redeem this NFT. Play more quizzes!")},disabled:!r,style:{backgroundColor:r?"#007AFF":"#555",color:"white",borderRadius:"15px",padding:a?"12px 25px":"20px 40px",fontSize:a?"16px":"20px",fontWeight:"bold",border:"none",cursor:r?"pointer":"not-allowed",boxShadow:r?"0 5px 20px rgba(0, 122, 255, 0.4)":"none",transition:"all 0.3s ease",marginTop:a?"25px":"35px"},children:r?"Confirm Redemption":"Insufficient Points"}),(0,b.jsx)(x.$n,{onClick:()=>t(-1),style:{backgroundColor:"transparent",color:"#007AFF",border:"none",marginTop:a?"15px":"25px",fontSize:a?"13px":"16px",cursor:"pointer"},children:"Go Back"})]})}):(0,b.jsx)(x.EY,{style:{color:"white",textAlign:"center"},children:"NFT not found"})},Q=[{id:1,name:"Bronze Trophy",cost:100,image:B},{id:2,name:"Silver Trophy",cost:200,image:L},{id:3,name:"Gold Trophy",cost:300,image:q},{id:4,name:"Platinum Trophy",cost:400,image:M}],Z=()=>{const[e,t]=(0,s.useState)([]),n=(0,c.Zp)(),o=(0,c.zy)();(0,s.useEffect)((()=>{const e=(JSON.parse(localStorage.getItem("ownedNfts"))||[]).map((e=>Q.find((t=>t.id===e)))).filter(Boolean);t(e)}),[o.key]);return(0,b.jsxs)("div",{style:{background:"black",padding:"40px",minHeight:"100vh",position:"relative"},children:[(0,b.jsx)(x.$n,{onClick:()=>n(-1),style:{position:"absolute",top:"20px",left:"20px",backgroundColor:"transparent",color:"white",border:"none",fontSize:"30px",cursor:"pointer",padding:"0"},children:"\u2190 "}),(0,b.jsx)(x.hE,{level:"1",style:{color:"white",textAlign:"center",marginBottom:"40px"},children:"My NFTs"}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"20px"},children:e.length>0?e.map((e=>(0,b.jsxs)(x.Zp,{style:{background:"#1c1c1e",padding:"20px",borderRadius:"20px",textAlign:"center"},children:[(0,b.jsx)("img",{src:e.image||"https://via.placeholder.com/150?text=No+Image",alt:e.name,style:{width:"100%",height:"auto",display:"block",borderRadius:"15px",marginBottom:"20px",border:"2px solid red"}}),(0,b.jsx)(x.EY,{style:{color:"white",fontSize:"20px",fontWeight:"bold"},children:e.name}),(0,b.jsx)(x.$n,{onClick:()=>(e=>{const n=(JSON.parse(localStorage.getItem("ownedNfts"))||[]).filter((t=>t!==e.id));localStorage.setItem("ownedNfts",JSON.stringify(n)),t((t=>t.filter((t=>t.id!==e.id))));const s=[...JSON.parse(localStorage.getItem("walletNfts"))||[],e.id];localStorage.setItem("walletNfts",JSON.stringify(s)),alert(`NFT ${e.name} transferred to your wallet!`)})(e),style:{background:"#007AFF",color:"white",borderRadius:"12px",marginTop:"20px"},children:"Transfer"})]},e.id))):(0,b.jsx)(x.EY,{style:{color:"white",textAlign:"center",gridColumn:"1 / -1"},children:"You don't own any NFTs yet. Redeem some!"})})]})},D=[{id:1,name:"Bronze Trophy",cost:100,image:B},{id:2,name:"Silver Trophy",cost:200,image:L},{id:3,name:"Gold Trophy",cost:300,image:q},{id:4,name:"Platinum Trophy",cost:400,image:M}],J=()=>{const[e,t]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const e=(JSON.parse(localStorage.getItem("walletNfts"))||[]).map((e=>D.find((t=>t.id===e)))).filter(Boolean);t(e)}),[]),(0,b.jsxs)("div",{style:{background:"black",padding:"40px",minHeight:"100vh"},children:[(0,b.jsx)(x.hE,{level:"1",style:{color:"white",textAlign:"center",marginBottom:"40px"},children:"My Wallet NFTs"}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"20px"},children:e.length>0?e.map((e=>(0,b.jsxs)(x.Zp,{style:{background:"#1c1c1e",padding:"20px",borderRadius:"20px",textAlign:"center"},children:[(0,b.jsx)("img",{src:e.image,alt:e.name,style:{width:"100%",borderRadius:"15px",marginBottom:"20px"}}),(0,b.jsx)(x.EY,{style:{color:"white",fontSize:"20px",fontWeight:"bold"},children:e.name})]},e.id))):(0,b.jsx)(x.EY,{style:{color:"white",textAlign:"center",gridColumn:"1 / -1"},children:"No NFTs in your wallet yet."})})]})};const Y=(0,n(73422).Ay)("http://localhost:5001"),_=["Science","History","Web3 General","DeFi","NFTs","Blockchain Fundamentals"];function U(e){let{session:t}=e;const[n,o]=(0,s.useState)("home"),[i,r]=(0,s.useState)(null),[l,a]=(0,s.useState)(null),[d,c]=(0,s.useState)(null),[p,x]=(0,s.useState)(null);(0,s.useEffect)((()=>(Y.on("connect",(()=>console.log("Connected to server!"))),Y.on("matchFound",(e=>{r(e),o("game")})),Y.on("newQuestion",(e=>{c(null),x(null),a(e)})),Y.on("roundResult",(e=>{c(e)})),Y.on("gameOver",(e=>{c(e),o("gameover")})),()=>{Y.off("connect"),Y.off("matchFound"),Y.off("newQuestion"),Y.off("roundResult"),Y.off("gameOver")})),[]);const h=()=>{o("home"),r(null),a(null),c(null)},u=()=>(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h2",{children:"Multiplayer Quiz"}),(0,b.jsx)("p",{children:"Select a category to find an opponent and test your knowledge!"}),(0,b.jsx)("div",{className:"category-buttons",children:_.map((e=>(0,b.jsx)("button",{onClick:()=>{return n=e,Y.emit("joinQueue",{category:n,userId:t.user.id}),void o("matching");var n},children:e},e)))})]}),g=()=>l?(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("h2",{children:["Question ",l.index+1]}),(0,b.jsx)("p",{className:"question-text",children:l.question.text}),(0,b.jsx)("div",{className:"options-grid",children:l.question.options.map(((e,t)=>{let n="";return d?e===d.correctAnswer?n="correct":e===p&&(n="wrong"):e===p&&(n="selected"),(0,b.jsx)("button",{className:n,onClick:()=>{return t=e,void(null===p&&(x(t),Y.emit("submitAnswer",{roomId:i.roomId,answer:t})));var t},disabled:null!==p,children:e},t)}))}),d&&(0,b.jsx)("div",{className:"result-text",children:"Next round starting soon..."})]}):(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("h2",{children:"Waiting for game to start..."})});return(0,b.jsx)("div",{className:"game-container",children:(()=>{switch(n){case"matching":return(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h2",{children:"Finding Opponent..."}),(0,b.jsx)("div",{className:"spinner"}),(0,b.jsx)("p",{children:"Please wait while we find a worthy adversary."})]});case"game":return g();case"gameover":return(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h2",{children:"Game Over!"}),d&&d.winner?(0,b.jsxs)("h3",{children:["\ud83c\udf89 Winner: User ",d.winner.slice(0,8),"... \ud83c\udf89"]}):(0,b.jsx)("h3",{children:"It's a Draw!"}),(0,b.jsx)("p",{children:"Check the leaderboard to see your new rank!"}),(0,b.jsx)("button",{onClick:h,className:"play-again-btn",children:"Play Again"})]});default:return u()}})()})}var X=n(13523),G=n(77650),H=n(13843),K=n(53811),ee=n(83480),te=n(7170),ne=n(890),se=n(52490),oe=n(27880);const ie=(0,X.Z)({chains:[K.C],transports:{[K.C.id]:(0,G.L)()},connectors:[(0,ee.u)({projectId:"5a58c41246d3f7f22595ef132c4f40de",metadata:{name:"AVAX Transfer App",description:"A simple app to transfer AVAX",url:"https://web3modal.com",icons:["https://avatars.githubusercontent.com/u/37784886"]},showQrModal:!0})]});function re(){const{address:e,isConnected:t}=(0,o.F)(),{connect:n,connectors:i,error:r,isLoading:l}=(0,te.e)(),{disconnect:a}=(0,ne.u)(),{data:d,error:p,isLoading:x,sendTransaction:h}=(0,se.s)(),u=(0,c.Zp)(),[g,m]=(0,s.useState)(""),[f,w]=(0,s.useState)("");(0,s.useEffect)((()=>{p&&w(`Transaction failed: ${p.message}`)}),[p]);return(0,b.jsxs)("div",{className:"transfer-container",children:[(0,b.jsx)("button",{onClick:()=>u("/"),className:"back-button",children:"\u2190 Back"}),(0,b.jsx)("h1",{className:"title",children:"AVAX Transfer"}),(0,b.jsx)("p",{className:"subtitle",children:"Send AVAX on Fuji Testnet instantly"}),t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"wallet-info",children:[(0,b.jsx)("p",{className:"wallet-label",children:"Connected Wallet"}),(0,b.jsx)("p",{className:"wallet-address",children:e}),(0,b.jsx)("button",{onClick:()=>a(),className:"disconnect-button",children:"Disconnect"})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{htmlFor:"toAddress",className:"input-label",children:"Recipient Address"}),(0,b.jsx)("input",{type:"text",id:"toAddress",value:g,onChange:e=>m(e.target.value),placeholder:"0x...",className:"input-field"})]}),(0,b.jsx)("button",{onClick:()=>{g?(w(""),h({to:g,value:(0,oe.g)("0.01")})):w("Please enter a valid recipient address.")},disabled:x,className:"send-button",children:x?"Sending...":"Send 0.01 AVAX"})]}):(0,b.jsx)("div",{className:"connectors",children:i.map((e=>(0,b.jsx)("button",{onClick:()=>n({connector:e}),disabled:l,className:"connect-button",children:l?"Connecting...":`Connect with ${e.name}`},e.id)))}),d&&(0,b.jsxs)("div",{className:"success-message",children:[(0,b.jsx)("p",{className:"success-title",children:"\u2705 Transaction Sent!"}),(0,b.jsx)("p",{className:"tx-link",children:(0,b.jsx)("a",{href:`https://testnet.snowtrace.io/tx/${d}`,target:"_blank",rel:"noopener noreferrer",children:"View on Snowtrace"})})]}),(f||r)&&(0,b.jsx)("div",{className:"error-message",children:(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Error:"})," ",f||(null===r||void 0===r?void 0:r.message)]})})]})}const le=function(){return(0,b.jsx)(H.x,{config:ie,children:(0,b.jsx)("div",{className:"p2p-wrapper",children:(0,b.jsx)(re,{})})})},ae=()=>{const e=(0,c.Zp)();return(0,b.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"black",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"20px"},children:[(0,b.jsx)("div",{style:{marginBottom:"20px"},children:(0,b.jsx)(x.hE,{level:"1",style:{color:"white",fontFamily:"'Poppins', sans-serif",fontSize:window.innerWidth<600?"24px":"32px",textAlign:"center",marginBottom:"8px"},children:"Choose Game Mode"})}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:window.innerWidth<600?"column":"row",gap:"20px"},children:[(0,b.jsx)(x.$n,{onClick:()=>{e("/quiz")},style:{backgroundColor:"#007AFF",color:"white",borderRadius:"12px",padding:"15px 30px",fontSize:"18px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 122, 255, 0.4)",transition:"all 0.3s ease"},children:"Single Player"}),(0,b.jsx)(x.$n,{onClick:()=>{e("/multiplayer")},style:{backgroundColor:"#FF9500",color:"white",borderRadius:"12px",padding:"15px 30px",fontSize:"18px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 4px 15px rgba(255, 149, 0, 0.4)",transition:"all 0.3s ease"},children:"Multiplayer"}),(0,b.jsx)(x.$n,{onClick:()=>e("/"),style:{backgroundColor:"#555",color:"white",borderRadius:"12px",padding:"15px 30px",fontSize:"18px",fontWeight:"bold",border:"none",cursor:"pointer",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease"},children:"Back"})]})]})};const de=function(){const[e,t]=(0,s.useState)(null),n=(0,u.Xr5)(),i=(0,s.useCallback)((()=>(window.open=e=>{console.log("Intercepted window.open with URL:",e);try{if(e.startsWith("tg://")||e.startsWith("https://t.me"))(0,u.ajq)(e);else if(e.startsWith("wc://")){const t=e.substring(5),n=`https://walletconnect.org/wc?uri=${encodeURIComponent(t)}`;console.log("Opening WalletConnect universal link:",n),(0,u.FeE)(n)}else if(e.startsWith("metamask://")){const t=`https://metamask.app.link/${e.substring(11)}`;console.log("Opening MetaMask universal link:",t),(0,u.FeE)(t)}else if(e.startsWith("trust://")){const t=`https://link.trustwallet.com/${e.substring(8)}`;console.log("Opening Trust Wallet universal link:",t),(0,u.FeE)(t)}else if(e.startsWith("rainbow://")){const t=e.substring(10),n=`https://rainbow.me/wc?uri=${encodeURIComponent(t)}`;console.log("Opening Rainbow Wallet universal link:",n),(0,u.FeE)(n)}else if(e.startsWith("coinbase://")){const t=e.substring(11),n=`https://go.cb-w.com/wc?uri=${encodeURIComponent(t)}`;console.log("Opening Coinbase Wallet universal link:",n),(0,u.FeE)(n)}else console.log("Opening generic link:",e),(0,u.FeE)(e)}catch(t){console.error("Error in window.open override:",t)}return null},!0)),[]);(0,s.useEffect)((()=>{u.XaK&&i()}),[i]);const p=(0,u.Uln)(u.xgq.isDark),h=(0,s.useCallback)((async(e,t)=>{try{const{error:n}=await r.from("users").upsert({id:e,email:t},{onConflict:"id"});n?console.error("Error updating user email in table:",n.message):console.log("User email updated successfully in table.")}catch(n){console.error("Caught error updating user email:",n.message)}}),[]),g=(0,s.useCallback)((async(e,t)=>{try{const{error:n}=await r.from("users").upsert({id:e,wallet_address:t},{onConflict:"id"});n?console.error("Error updating user wallet address in table:",n.message):console.log("User wallet address updated successfully in table.")}catch(n){console.error("Caught error updating user wallet address:",n.message)}}),[]);(0,s.useEffect)((()=>{r.auth.getSession().then((e=>{let{data:{session:n}}=e;t(n),n&&n.user&&n.user.email&&h(n.user.id,n.user.email),window.location.hash&&window.history.replaceState(null,"",window.location.pathname)}));const{data:{subscription:e}}=r.auth.onAuthStateChange(((e,n)=>{t(n),n&&n.user&&n.user.email&&h(n.user.id,n.user.email),window.location.hash&&window.history.replaceState(null,"",window.location.pathname)}));return()=>e.unsubscribe()}),[h]);const{address:m,isConnected:f}=(0,o.F)();return(0,s.useEffect)((()=>{e&&e.user&&f&&m&&g(e.user.id,m)}),[e,f,m,g]),e?(0,b.jsx)(x.K,{appearance:p?"dark":"light",platform:["macos","ios"].includes(n.platform)?"ios":"base",children:(0,b.jsx)(d.I9,{children:(0,b.jsxs)(c.BV,{children:[(0,b.jsx)(c.qh,{path:"/",element:(0,b.jsx)(C,{session:e})}),(0,b.jsx)(c.qh,{path:"/quiz",element:(0,b.jsx)(E,{})}),(0,b.jsx)(c.qh,{path:"/dashboard",element:(0,b.jsx)(R,{session:e})}),(0,b.jsx)(c.qh,{path:"/redeem",element:(0,b.jsx)(V,{})}),(0,b.jsx)(c.qh,{path:"/redeem/:id",element:(0,b.jsx)(P,{})}),(0,b.jsx)(c.qh,{path:"/my-nfts",element:(0,b.jsx)(Z,{})}),(0,b.jsx)(c.qh,{path:"/wallet-nfts",element:(0,b.jsx)(J,{})}),(0,b.jsx)(c.qh,{path:"/multiplayer",element:(0,b.jsx)(U,{session:e})}),(0,b.jsx)(c.qh,{path:"/p2p",element:(0,b.jsx)(le,{})}),(0,b.jsx)(c.qh,{path:"/game-options",element:(0,b.jsx)(ae,{})}),(0,b.jsx)(c.qh,{path:"/leaderboard",element:(0,b.jsx)(v,{})}),(0,b.jsx)(c.qh,{path:"*",element:(0,b.jsx)(c.C5,{to:"/"})})]})})}):(0,b.jsx)(x.K,{appearance:p?"dark":"light",platform:["macos","ios"].includes(n.platform)?"ios":"base",children:(0,b.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,b.jsx)("div",{style:{width:"320px"},children:(0,b.jsx)(l.Nj,{supabaseClient:r,appearance:{theme:a.Hv},theme:"dark",providers:["google","github"]})})})})}}}]);